{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/ng-gallery/src/lib/models/constants.ts","../../../projects/ng-gallery/src/lib/utils/gallery.default.ts","../../../projects/ng-gallery/src/lib/components/templates/items.model.ts","../../../projects/ng-gallery/src/lib/services/gallery-ref.ts","../../../projects/ng-gallery/src/lib/models/config.model.ts","../../../projects/ng-gallery/src/lib/services/gallery.service.ts","../../../projects/ng-gallery/src/lib/components/gallery.component.ts","../../../projects/ng-gallery/src/lib/components/templates/gallery-iframe.component.ts","../../../projects/ng-gallery/src/lib/components/templates/gallery-image.component.ts","../../../projects/ng-gallery/src/lib/components/templates/gallery-video.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-nav.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-core.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-dots.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-thumbs.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-slider.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-counter.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-item.component.ts","../../../projects/ng-gallery/src/lib/components/gallery-thumb.component.ts","../../../projects/ng-gallery/src/lib/directives/lazy-image.ts","../../../projects/ng-gallery/src/lib/directives/tap-click.ts","../../../projects/ng-gallery/src/lib/gallery.module.ts"],"names":["Object","create","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","GalleryAction","ImageSize","LoadingStrategy","ThumbnailsPosition","ImageLoaderMode","DotsPosition","CounterPosition","ThumbnailsMode","SlidingDirection","GalleryItemType","defaultState","action","INITIALIZED","isPlaying","hasNext","hasPrev","currIndex","items","defaultConfig","nav","loop","zoomOut","dots","thumb","dotsSize","counter","gestures","autoPlay","thumbWidth","thumbHeight","panSensitivity","disableThumb","playerInterval","imageSize","Contain","thumbMode","Strict","dotsPosition","Bottom","counterPosition","Top","thumbPosition","loadingStrategy","Default","slidingDirection","Horizontal","navIcon","loadingIcon","data","this","type","Image","Video","Iframe","assign","src","Youtube","filterActions","actions","filter","state","indexOf","GalleryRef","config","deleteInstance","itemClick","Subject","thumbClick","_state","BehaviorSubject","_config","asObservable","defineProperty","prototype","pipe","ITEMS_CHANGED","INDEX_CHANGED","PLAY","STOP","activatePlayer","_this","playerActions","switchMap","of","delay","tap","EMPTY","setState","setConfig","add","item","active","addImage","ImageItem","addVideo","VideoItem","addIframe","IframeItem","addYoutube","YoutubeItem","remove","slice","load","set","prev","play","interval","stop","reset","destroy","complete","GALLERY_CONFIG","InjectionToken","Gallery","_instances","Map","ref","id","has","galleryRef","get","destroyAll","forEach","resetAll","delete","Injectable","args","providedIn","Optional","Inject","GalleryComponent","_gallery","itemTemplate","thumbTemplate","destroyRef","skipInitConfig","EventEmitter","playingChange","indexChange","itemsChange","_itemClick$","Subscription","_thumbClick$","_itemChange$","_indexChange$","_playingChange$","_playerListener$","_height","getConfig","onAction","ngOnChanges","changes","currentValue","previousValue","ngOnInit","subscribe","observers","indexChanged","emit","itemsChanged","playingChanged","ngOnDestroy","unsubscribe","onItemClick","onThumbClick","onError","err","withHeight","height","Component","selector","changeDetection","ChangeDetectionStrategy","OnPush","template","Input","HostBinding","Output","GalleryIframeComponent","_sanitizer","iframeSrc","bypassSecurityTrustResourceUrl","shouldPause","iframe","nativeElement","DomSanitizer","ViewChild","static","GalleryImageComponent","progress","imageUrl","loadError","loaderTemplate","bypassSecurityTrustHtml","loadingError","errorTemplate","onProgress","_a","loaded","total","onLoaded","blobUrl","bypassSecurityTrustStyle","animations","trigger","transition","style","opacity","animate","GalleryVideoComponent","video","paused","pause","shouldPlay","Array","videoSources","url","controls","controlsEnabled","GalleryNavComponent","GalleryCoreComponent","GalleryThumbsComponent","_el","_zone","_slidingWorker$","_freeModeCurrentOffset","sliderState$","map","getSliderStyles","updateSlider","Hammer","direction","Right","Left","LeftTop","DIRECTION_VERTICAL","BottomLeft","DIRECTION_HORIZONTAL","_hammer","runOutsideAngular","on","strictMode","Free","freeMode","deltaY","isFinal","verticalPan","deltaX","horizontalPan","minFreeScrollExceeded","maxFreeScrollExceeded","delta","width","transform","DIRECTION_UP","offsetDirection","velocityY","velocityX","newState","ElementRef","NgZone","GallerySliderComponent","platform","Vertical","isPlatformBrowser","_resizeSub$","fromEvent","window","debounceTime","setTimeout","offsetWidth","offsetHeight","decorators","PLATFORM_ID","GalleryItemComponent","Types","index","isActive","autoplay","URL","search","URLSearchParams","wmode","params","toString","href","Preload","Lazy","GalleryThumbComponent","LazyImage","document","_imageLoader$","_loaderSub$","imageSrc","nativeLoader","loadImage","imagePath","img","createElement","loadSuccess","Error","zip","Directive","DOCUMENT","TapClick","clickListener","tapClick","activateClickEvent","tapClickDisabled","GalleryModule","withConfig","ngModule","providers","provide","useValue","NgModule","imports","CommonModule","declarations","GalleryDotsComponent","GalleryCounterComponent","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export enum GalleryAction {\n  INITIALIZED = 'initialized',\n  ITEMS_CHANGED = 'itemsChanged',\n  INDEX_CHANGED = 'indexChanged',\n  PLAY = 'play',\n  STOP = 'stop'\n}\n\nexport enum ImageSize {\n  Cover = 'cover',\n  Contain = 'contain'\n}\n\nexport enum LoadingStrategy {\n  Preload = 'preload',\n  Lazy = 'lazy',\n  Default = 'default'\n}\n\nexport enum ThumbnailsPosition {\n  Top = 'top',\n  Left = 'left',\n  LeftTop = 'left-top',\n  Right = 'right',\n  Bottom = 'bottom',\n  BottomLeft = 'bottom-left',\n}\n\nexport enum ImageLoaderMode {\n  Determinate= 'determinate',\n  Indeterminate= 'indeterminate'\n}\n\nexport enum DotsPosition {\n  Top = 'top',\n  Bottom = 'bottom'\n}\n\nexport enum CounterPosition {\n  Top = 'top',\n  Bottom = 'bottom'\n}\n\nexport enum ThumbnailsMode {\n  Free = 'free',\n  Strict = 'strict'\n}\n\nexport enum SlidingDirection {\n  Horizontal = 'horizontal',\n  Vertical = 'vertical'\n}\n\nexport enum GalleryItemType {\n  Image = 'image',\n  Video = 'video',\n  Youtube = 'youtube',\n  Iframe = 'iframe'\n}\n","import {\n  ImageSize,\n  GalleryAction,\n  ThumbnailsMode,\n  LoadingStrategy,\n  SlidingDirection,\n  ThumbnailsPosition,\n  ImageLoaderMode,\n  DotsPosition,\n  CounterPosition\n} from '../models/constants';\nimport { GalleryState } from '../models/gallery.model';\nimport { GalleryConfig } from '../models/config.model';\n\n/** Initial state */\nexport const defaultState: GalleryState = {\n  action: GalleryAction.INITIALIZED,\n  isPlaying: false,\n  hasNext: false,\n  hasPrev: false,\n  currIndex: 0,\n  items: []\n};\n\nexport const defaultConfig: GalleryConfig = {\n  nav: true,\n  loop: true,\n  zoomOut: 0,\n  dots: false,\n  thumb: true,\n  dotsSize: 30,\n  counter: true,\n  gestures: true,\n  autoPlay: false,\n  thumbWidth: 120,\n  thumbHeight: 90,\n  panSensitivity: 25,\n  disableThumb: false,\n  playerInterval: 3000,\n  imageSize: ImageSize.Contain,\n  thumbMode: ThumbnailsMode.Strict,\n  dotsPosition: DotsPosition.Bottom,\n  counterPosition: CounterPosition.Top,\n  thumbPosition: ThumbnailsPosition.Bottom,\n  loadingStrategy: LoadingStrategy.Default,\n  slidingDirection: SlidingDirection.Horizontal,\n  navIcon: `<?xml version=\"1.0\" encoding=\"UTF-8\"?><svg width=\"512px\" height=\"512px\" enable-background=\"new 0 0 240.823 240.823\" version=\"1.1\" viewBox=\"0 0 240.823 240.823\" xml:space=\"preserve\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m183.19 111.82l-108.3-108.26c-4.752-4.74-12.451-4.74-17.215 0-4.752 4.74-4.752 12.439 0 17.179l99.707 99.671-99.695 99.671c-4.752 4.74-4.752 12.439 0 17.191 4.752 4.74 12.463 4.74 17.215 0l108.3-108.26c4.68-4.691 4.68-12.511-0.012-17.19z\" fill=\"#fff\"/></svg>`,\n  loadingIcon: `<?xml version=\"1.0\" encoding=\"UTF-8\"?><svg stroke=\"#fff\" viewBox=\"0 0 44 44\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\" stroke-width=\"2\"><circle cx=\"22\" cy=\"22\" r=\"1\"><animate attributeName=\"r\" begin=\"0s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.165, 0.84, 0.44, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 20\"/><animate attributeName=\"stroke-opacity\" begin=\"0s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.3, 0.61, 0.355, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 0\"/></circle><circle cx=\"22\" cy=\"22\" r=\"1\"><animate attributeName=\"r\" begin=\"-0.9s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.165, 0.84, 0.44, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 20\"/><animate attributeName=\"stroke-opacity\" begin=\"-0.9s\" calcMode=\"spline\" dur=\"1.8s\" keySplines=\"0.3, 0.61, 0.355, 1\" keyTimes=\"0; 1\" repeatCount=\"indefinite\" values=\"1; 0\"/></circle></g></svg>`\n};\n","import { GalleryItem } from '../../models/gallery.model';\nimport { GalleryItemType } from '../../models/constants';\n\nexport class ImageItem implements GalleryItem {\n  readonly type: string;\n  readonly data: ImageItemData;\n\n  constructor(data: ImageItemData) {\n    this.data = data;\n    this.type = GalleryItemType.Image;\n  }\n}\n\nexport class VideoItem implements GalleryItem {\n  readonly type: string;\n  readonly data: VideoItemData;\n\n  constructor(data: VideoItemData) {\n    this.data = data;\n    this.type = GalleryItemType.Video;\n  }\n}\n\nexport class IframeItem implements GalleryItem {\n  readonly type: string;\n  readonly data: IframeItemData;\n\n  constructor(data: IframeItemData) {\n    this.data = data;\n    this.type = GalleryItemType.Iframe;\n  }\n}\n\nexport class YoutubeItem implements GalleryItem {\n  readonly type: string;\n  readonly data: YoutubeItemData;\n\n  constructor(data: YoutubeItemData) {\n    this.data = {\n      ...data,\n      ...{\n        src: `https://youtube.com/embed/${ data.src }`,\n        thumb: data.thumb ? data.thumb : `//img.youtube.com/vi/${ data.src }/default.jpg`\n      }\n    };\n    this.type = GalleryItemType.Youtube;\n  }\n}\n\ntype GalleryItemModel = {\n  type?: string;\n  src?: string;\n  thumb?: string;\n};\n\nexport type ImageItemData = GalleryItemModel;\n\nexport type IframeItemData = GalleryItemModel & {\n  params?: any;\n};\n\nexport type YoutubeItemData = IframeItemData & {\n  autoplay?: boolean;\n};\n\nexport type VideoItemData = GalleryItemModel & {\n  src?: string | { url: string, type: string }[];\n  thumb?: string;\n  poster?: string;\n  controls?: boolean;\n  autoplay?: boolean;\n};\n\nexport type GalleryItemData = ImageItemData | VideoItemData | IframeItemData | YoutubeItemData;\n","import { BehaviorSubject, Subject, Observable, of, EMPTY } from 'rxjs';\nimport { delay, filter, switchMap, tap } from 'rxjs/operators';\nimport { defaultState } from '../utils/gallery.default';\nimport { GalleryError, GalleryItem, GalleryState } from '../models/gallery.model';\nimport { GalleryConfig } from '../models/config.model';\nimport { GalleryAction } from '../models/constants';\nimport { IframeItem, ImageItem, VideoItem, YoutubeItem } from '../components/templates/items.model';\n\nconst filterActions = (actions: string[]) => {\n  return filter((state: GalleryState) => actions.indexOf(state.action) > -1);\n};\n\nexport class GalleryRef {\n\n  /** Stream that emits gallery state */\n  private readonly _state: BehaviorSubject<GalleryState>;\n\n  /** Stream that emits gallery config */\n  private readonly _config: BehaviorSubject<GalleryConfig>;\n\n  /** Stream that emits on item click */\n  readonly itemClick = new Subject<number>();\n\n  /** Stream that emits on thumbnail click */\n  readonly thumbClick = new Subject<number>();\n\n  /** Stream that emits on an error occurs */\n  readonly error = new Subject<GalleryError>();\n\n  /** Gallery Events */\n\n  /** Stream that emits gallery state */\n  readonly state: Observable<GalleryState>;\n\n  /** Stream that emits gallery config */\n  readonly config: Observable<GalleryConfig>;\n\n  /** Stream that emits when gallery is initialized/reset */\n  get initialized(): Observable<GalleryState> {\n    return this.state.pipe(filterActions([GalleryAction.INITIALIZED]));\n  }\n\n  /** Stream that emits when items is changed (items loaded, item added, item removed) */\n  get itemsChanged(): Observable<GalleryState> {\n    return this.state.pipe(filterActions([GalleryAction.ITEMS_CHANGED]));\n  }\n\n  /** Stream that emits when current item is changed */\n  get indexChanged(): Observable<GalleryState> {\n    return this.state.pipe(filterActions([GalleryAction.INDEX_CHANGED]));\n  }\n\n  /** Stream that emits when the player should start or stop */\n  get playingChanged(): Observable<GalleryState> {\n    return this.state.pipe(filterActions([GalleryAction.PLAY, GalleryAction.STOP]));\n  }\n\n  /** Stream that emits when the player should start or stop */\n  private get playerActions(): Observable<GalleryState> {\n    return this.state.pipe(filterActions([GalleryAction.PLAY, GalleryAction.STOP, GalleryAction.INDEX_CHANGED]));\n  }\n\n  constructor(config: GalleryConfig, private deleteInstance: () => void) {\n    this._state = new BehaviorSubject<GalleryState>(defaultState);\n    this._config = new BehaviorSubject<GalleryConfig>(config);\n    this.state = this._state.asObservable();\n    this.config = this._config.asObservable();\n  }\n\n  /**\n   * Activate player actions listener\n   */\n  activatePlayer(): Observable<GalleryState> {\n    return this.playerActions.pipe(\n      switchMap((e: GalleryState) =>\n        e.isPlaying ? of({}).pipe(\n          delay(this._config.value.playerInterval),\n          tap(() => this.next())\n        ) : EMPTY\n      )\n    );\n  }\n\n  /**\n   * Set gallery state\n   */\n  private setState(state: GalleryState) {\n    this._state.next({...this._state.value, ...state});\n  }\n\n  /**\n   * Set gallery config\n   */\n  setConfig(config: GalleryConfig) {\n    this._config.next({...this._config.value, ...config});\n  }\n\n  /**\n   * Add gallery item\n   */\n  add(item: GalleryItem, active?: boolean) {\n    const items = [...this._state.value.items, item];\n    this.setState({\n      action: GalleryAction.ITEMS_CHANGED,\n      items,\n      hasNext: items.length > 1,\n      currIndex: active ? items.length - 1 : this._state.value.currIndex\n    });\n  }\n\n  /**\n   * Add image item\n   */\n  addImage(data: any, active?: boolean) {\n    this.add(new ImageItem(data), active);\n  }\n\n  /**\n   * Add video item\n   */\n  addVideo(data: any, active?: boolean) {\n    this.add(new VideoItem(data), active);\n  }\n\n  /**\n   * Add iframe item\n   */\n  addIframe(data: any, active?: boolean) {\n    this.add(new IframeItem(data), active);\n  }\n\n  /**\n   * Add youtube item\n   */\n  addYoutube(data: any, active?: boolean) {\n    this.add(new YoutubeItem(data), active);\n  }\n\n  /**\n   * Remove gallery item\n   */\n  remove(i: number) {\n    const items = [\n      ...this._state.value.items.slice(0, i),\n      ...this._state.value.items.slice(i + 1, this._state.value.items.length)\n    ];\n    this.setState({\n      action: GalleryAction.ITEMS_CHANGED,\n      items,\n      hasNext: items.length > 1,\n      hasPrev: i > 0\n    });\n  }\n\n  /**\n   * Load items and reset the state\n   */\n  load(items: GalleryItem[]) {\n    if (items) {\n      this.setState({\n        action: GalleryAction.ITEMS_CHANGED,\n        items,\n        hasNext: items.length > 1,\n        hasPrev: false\n      });\n    }\n  }\n\n  /**\n   * Set active item\n   */\n  set(i: number) {\n    if (i !== this._state.value.currIndex) {\n      this.setState({\n        action: GalleryAction.INDEX_CHANGED,\n        currIndex: i,\n        hasNext: i < this._state.value.items.length - 1,\n        hasPrev: i > 0\n      });\n    }\n  }\n\n  /**\n   * Next item\n   */\n  next() {\n    if (this._state.value.hasNext) {\n      this.set(this._state.value.currIndex + 1);\n    } else if (this._config.value.loop) {\n      this.set(0);\n    }\n  }\n\n  /**\n   * Prev item\n   */\n  prev() {\n    if (this._state.value.hasPrev) {\n      this.set(this._state.value.currIndex - 1);\n    } else if (this._config.value.loop) {\n      this.set(this._state.value.items.length - 1);\n    }\n  }\n\n  /**\n   * Start gallery player\n   */\n  play(interval?: number) {\n    if (interval) {\n      this.setConfig({playerInterval: interval});\n    }\n    this.setState({action: GalleryAction.PLAY, isPlaying: true});\n  }\n\n  /**\n   * Stop gallery player\n   */\n  stop() {\n    this.setState({action: GalleryAction.STOP, isPlaying: false});\n  }\n\n  /**\n   * Reset gallery to initial state\n   */\n  reset() {\n    this.setState(defaultState);\n  }\n\n  /**\n   * Destroy gallery\n   */\n  destroy() {\n    this._state.complete();\n    this._config.complete();\n    this.itemClick.complete();\n    this.thumbClick.complete();\n    this.deleteInstance();\n  }\n\n}\n","import { InjectionToken, TemplateRef } from '@angular/core';\n\nexport const GALLERY_CONFIG = new InjectionToken<GalleryConfig>('GALLERY_CONFIG');\n\nexport interface GalleryConfig {\n  nav?: boolean;\n  dots?: boolean;\n  loop?: boolean;\n  thumb?: boolean;\n  zoomOut?: number;\n  navIcon?: string;\n  counter?: boolean;\n  dotsSize?: number;\n  gestures?: boolean;\n  autoPlay?: boolean;\n  thumbWidth?: number;\n  thumbHeight?: number;\n  loadingIcon?: string;\n  loadingError?: string;\n  thumbLoadingIcon?: string;\n  thumbLoadingError?: string;\n  disableThumb?: boolean;\n  panSensitivity?: number;\n  playerInterval?: number;\n  itemTemplate?: TemplateRef<any>;\n  thumbTemplate?: TemplateRef<any>;\n  thumbMode?: 'strict' | 'free';\n  imageSize?: 'cover' | 'contain';\n  dotsPosition?: 'top' | 'bottom';\n  counterPosition?: 'top' | 'bottom';\n  slidingDirection?: 'horizontal' | 'vertical';\n  loadingStrategy?: 'preload' | 'lazy' | 'default';\n  thumbPosition?: 'top' | 'left' | 'left-top' | 'right' | 'bottom' | 'bottom-left';\n}\n","import { Inject, Injectable, Optional } from '@angular/core';\n\nimport { GalleryRef } from './gallery-ref';\nimport { GalleryConfig, GALLERY_CONFIG } from '../models/config.model';\nimport { defaultConfig } from '../utils/gallery.default';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class Gallery {\n\n  /** Store gallery instances */\n  private readonly _instances = new Map<string, GalleryRef>();\n\n  /** Global config */\n  config: GalleryConfig;\n\n  constructor(@Optional() @Inject(GALLERY_CONFIG) config: GalleryConfig) {\n    this.config = config ? {...defaultConfig, ...config} : defaultConfig;\n  }\n\n  /**\n   * Get or create gallery by ID\n   * @param id\n   * @param config\n   */\n  ref(id = 'root', config?: GalleryConfig): GalleryRef {\n    if (this._instances.has(id)) {\n      const galleryRef = this._instances.get(id);\n      if (config) {\n        galleryRef.setConfig({...this.config, ...config});\n      }\n      return galleryRef;\n    } else {\n      return this._instances.set(id, new GalleryRef({...this.config, ...config}, this.deleteInstance(id))).get(id);\n    }\n  }\n\n  /**\n   * Destroy all gallery instances\n   */\n  destroyAll() {\n    this._instances.forEach((ref: GalleryRef) => ref.destroy());\n  }\n\n  /**\n   * Reset all gallery instances\n   */\n  resetAll() {\n    this._instances.forEach((ref: GalleryRef) => ref.reset());\n  }\n\n  /**\n   * A destroyer function for each gallery instance\n   */\n  private deleteInstance(id: string) {\n    return () => {\n      if (this._instances.has(id)) {\n        this._instances.delete(id);\n      }\n    };\n  }\n\n}\n","import {\n  Component,\n  Input,\n  Output,\n  OnInit,\n  OnChanges,\n  OnDestroy,\n  SimpleChanges,\n  TemplateRef,\n  EventEmitter,\n  ChangeDetectionStrategy, HostBinding\n} from '@angular/core';\nimport { Subscription, SubscriptionLike } from 'rxjs';\nimport { Gallery } from '../services/gallery.service';\nimport { GalleryRef } from '../services/gallery-ref';\nimport { GalleryError, GalleryItem, GalleryState } from '../models/gallery.model';\nimport {\n  IframeItem,\n  IframeItemData,\n  ImageItem,\n  ImageItemData,\n  VideoItem,\n  VideoItemData,\n  YoutubeItem,\n  YoutubeItemData\n} from './templates/items.model';\n\n@Component({\n  selector: 'gallery',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['../styles/gallery.scss'],\n  template: `\n    <gallery-core [state]=\"galleryRef.state | async\"\n                  [config]=\"galleryRef.config | async\"\n                  (action)=\"onAction($event)\"\n                  (itemClick)=\"onItemClick($event)\"\n                  (thumbClick)=\"onThumbClick($event)\"\n                  (error)=\"onError($event)\"></gallery-core>\n    <ng-content></ng-content>\n  `\n})\nexport class GalleryComponent implements OnInit, OnChanges, OnDestroy {\n\n  galleryRef: GalleryRef;\n  @Input() id: string;\n  @Input() items: GalleryItem [];\n  @Input() nav: boolean = this._gallery.config.nav;\n  @Input() dots: boolean = this._gallery.config.dots;\n  @Input() loop: boolean = this._gallery.config.loop;\n  @Input() thumb: boolean = this._gallery.config.thumb;\n  @Input() zoomOut: number = this._gallery.config.zoomOut;\n  @Input() counter: boolean = this._gallery.config.counter;\n  @Input() dotsSize: number = this._gallery.config.dotsSize;\n  @Input() autoPlay: boolean = this._gallery.config.autoPlay;\n  @Input() gestures: boolean = this._gallery.config.gestures;\n  @Input() thumbWidth: number = this._gallery.config.thumbWidth;\n  @Input() thumbHeight: number = this._gallery.config.thumbHeight;\n  @Input() disableThumb: boolean = this._gallery.config.disableThumb;\n  @Input() panSensitivity: number = this._gallery.config.panSensitivity;\n  @Input() playerInterval: number = this._gallery.config.playerInterval;\n  @Input() itemTemplate: TemplateRef<any> = this._gallery.config.itemTemplate;\n  @Input() thumbTemplate: TemplateRef<any> = this._gallery.config.thumbTemplate;\n  @Input() thumbMode: 'strict' | 'free' = this._gallery.config.thumbMode;\n  @Input() imageSize: 'cover' | 'contain' = this._gallery.config.imageSize;\n  @Input() dotsPosition: 'top' | 'bottom' = this._gallery.config.dotsPosition;\n  @Input() counterPosition: 'top' | 'bottom' = this._gallery.config.counterPosition;\n  @Input() slidingDirection: 'horizontal' | 'vertical' = this._gallery.config.slidingDirection;\n  @Input() loadingStrategy: 'preload' | 'lazy' | 'default' = this._gallery.config.loadingStrategy;\n  @Input() thumbPosition: 'top' | 'left' | 'left-top' | 'right' | 'bottom' |  'bottom-left' = this._gallery.config.thumbPosition;\n\n  _height: string;\n  @HostBinding('style.height') get height(): string {\n    return this._height\n  }\n\n  // Inputs used by the lightbox\n\n  /** Destroy gallery ref on component destroy event */\n  @Input() destroyRef = true;\n\n  /** Skip initializing the config with components inputs (Lightbox mode) */\n  @Input() skipInitConfig = false;\n\n  @Output() itemClick = new EventEmitter<number>();\n  @Output() thumbClick = new EventEmitter<number>();\n  @Output() playingChange = new EventEmitter<GalleryState>();\n  @Output() indexChange = new EventEmitter<GalleryState>();\n  @Output() itemsChange = new EventEmitter<GalleryState>();\n  @Output() error = new EventEmitter<GalleryError>();\n\n  private _itemClick$: SubscriptionLike = Subscription.EMPTY;\n  private _thumbClick$: SubscriptionLike = Subscription.EMPTY;\n  private _itemChange$: SubscriptionLike = Subscription.EMPTY;\n  private _indexChange$: SubscriptionLike = Subscription.EMPTY;\n  private _playingChange$: SubscriptionLike = Subscription.EMPTY;\n  private _playerListener$: SubscriptionLike = Subscription.EMPTY;\n\n  constructor(private _gallery: Gallery) {\n  }\n\n  private getConfig() {\n    return {\n      nav: this.nav,\n      dots: this.dots,\n      loop: this.loop,\n      thumb: this.thumb,\n      zoomOut: this.zoomOut,\n      counter: this.counter,\n      autoPlay: this.autoPlay,\n      gestures: this.gestures,\n      dotsSize: this.dotsSize,\n      imageSize: this.imageSize,\n      thumbMode: this.thumbMode,\n      thumbWidth: this.thumbWidth,\n      thumbHeight: this.thumbHeight,\n      disableThumb: this.disableThumb,\n      dotsPosition: this.dotsPosition,\n      itemTemplate: this.itemTemplate,\n      thumbTemplate: this.thumbTemplate,\n      thumbPosition: this.thumbPosition,\n      panSensitivity: this.panSensitivity,\n      playerInterval: this.playerInterval,\n      counterPosition: this.counterPosition,\n      loadingStrategy: this.loadingStrategy,\n      slidingDirection: this.slidingDirection\n    };\n  }\n\n  onAction(i: string | number) {\n    switch (i) {\n      case 'next':\n        this.galleryRef.next();\n        break;\n      case 'prev':\n        this.galleryRef.prev();\n        break;\n      default:\n        this.galleryRef.set(i as number);\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.galleryRef) {\n      this.galleryRef.setConfig(this.getConfig());\n\n      if (changes.items && changes.items.currentValue !== changes.items.previousValue) {\n        this.load(this.items);\n      }\n    }\n  }\n\n  ngOnInit() {\n    // Get gallery instance by id\n    if (this.skipInitConfig) {\n      this.galleryRef = this._gallery.ref(this.id);\n    } else {\n      this.galleryRef = this._gallery.ref(this.id, this.getConfig());\n    }\n\n    // Load gallery items\n    this.load(this.items);\n\n    // Activate player listener\n    this._playerListener$ = this.galleryRef.activatePlayer().subscribe();\n\n    // Subscribes to events on demand\n    if (this.indexChange.observers.length) {\n      this._indexChange$ = this.galleryRef.indexChanged.subscribe((state: GalleryState) => this.indexChange.emit(state));\n    }\n    if (this.itemsChange.observers.length) {\n      this._itemChange$ = this.galleryRef.itemsChanged.subscribe((state: GalleryState) => this.itemsChange.emit(state));\n    }\n    if (this.playingChange.observers.length) {\n      this._playingChange$ = this.galleryRef.playingChanged.subscribe((state: GalleryState) => this.playingChange.emit(state));\n    }\n\n    // Start playing if auto-play is set to true\n    if (this.autoPlay) {\n      this.play();\n    }\n  }\n\n  ngOnDestroy() {\n    this._itemClick$.unsubscribe();\n    this._thumbClick$.unsubscribe();\n    this._itemChange$.unsubscribe();\n    this._indexChange$.unsubscribe();\n    this._playingChange$.unsubscribe();\n    this._playerListener$.unsubscribe();\n    if (this.destroyRef) {\n      this.galleryRef.destroy();\n    }\n  }\n\n  onItemClick(i: number) {\n    this.itemClick.emit(i);\n    this.galleryRef.itemClick.next(i);\n  }\n\n  onThumbClick(i: number) {\n    this.galleryRef.set(i);\n    this.thumbClick.emit(i);\n    this.galleryRef.thumbClick.next(i);\n  }\n\n  onError(err: GalleryError) {\n    this.error.emit(err);\n    this.galleryRef.error.next(err);\n  }\n\n  load(items: GalleryItem[]) {\n    this.galleryRef.load(items);\n  }\n\n  add(item: GalleryItem, active?: boolean) {\n    this.galleryRef.add(item, active);\n  }\n\n  addImage(data: ImageItemData, active?: boolean) {\n    this.add(new ImageItem(data), active);\n  }\n\n  addVideo(data: VideoItemData, active?: boolean) {\n    this.add(new VideoItem(data), active);\n  }\n\n  addIframe(data: IframeItemData, active?: boolean) {\n    this.add(new IframeItem(data), active);\n  }\n\n  addYoutube(data: YoutubeItemData, active?: boolean) {\n    this.add(new YoutubeItem(data), active);\n  }\n\n  remove(i: number) {\n    this.galleryRef.remove(i);\n  }\n\n  next() {\n    this.galleryRef.next();\n  }\n\n  prev() {\n    this.galleryRef.prev();\n  }\n\n  set(i: number) {\n    this.galleryRef.set(i);\n  }\n\n  reset() {\n    this.galleryRef.reset();\n  }\n\n  play(interval?: number) {\n    this.galleryRef.play(interval);\n  }\n\n  stop() {\n    this.galleryRef.stop();\n  }\n\n  withHeight(height: string | number) {\n    this._height = `${height}px`\n  }\n}\n","import { Component, Input, ViewChild, ElementRef, ChangeDetectionStrategy } from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n\n@Component({\n  selector: 'gallery-iframe',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <iframe #iframe\n            frameborder=\"0\"\n            allowfullscreen\n            [attr.allow]=\"autoplay ? 'autoplay' : ''\"\n            [src]=\"iframeSrc\">\n    </iframe>\n  `\n})\nexport class GalleryIframeComponent {\n\n  iframeSrc: SafeResourceUrl;\n\n  @Input('src') set src(src: string) {\n    this.iframeSrc = this._sanitizer.bypassSecurityTrustResourceUrl(src);\n  }\n\n  @Input('pause') set pauseVideo(shouldPause: boolean) {\n    if (this.iframe.nativeElement) {\n      if (shouldPause) {\n        const iframe: HTMLIFrameElement = this.iframe.nativeElement;\n        iframe.src = null;\n      }\n    }\n  }\n\n  @Input() autoplay: boolean;\n\n  @ViewChild('iframe', { static: true }) iframe: ElementRef;\n\n  constructor(private _sanitizer: DomSanitizer) {\n  }\n}\n","import { Component, Input, HostBinding, OnInit, Output, EventEmitter, ChangeDetectionStrategy, OnDestroy } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeStyle } from '@angular/platform-browser';\nimport { animate, style, transition, trigger } from '@angular/animations';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'gallery-image',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('fadeIn', [\n      transition(':enter', [\n        style({opacity: 0}),\n        animate('300ms ease-in', style({opacity: 1}))\n      ])\n    ])\n  ],\n  template: `\n    <ng-container [lazyImage]=\"src\"\n                  (progress)=\"onProgress($event)\"\n                  (loaded)=\"onLoaded($event)\"\n                  (error)=\"onError($event)\"\n                  [ngSwitch]=\"state | async\">\n\n      <div *ngSwitchCase=\"'success'\"\n           @fadeIn\n           class=\"g-image-item\"\n           [style.backgroundImage]=\"imageUrl\">\n      </div>\n\n      <div *ngSwitchCase=\"'failed'\"\n           class=\"g-image-error-message\">\n        <div *ngIf=\"errorTemplate; else defaultError\"\n             [innerHTML]=\"errorTemplate\"></div>\n        <ng-template #defaultError>\n          <ng-container *ngIf=\"isThumbnail; else isLarge\">\n            <h4></h4>\n          </ng-container>\n          <ng-template #isLarge>\n            <h2></h2>\n            <p>Unable to load the image!</p>\n          </ng-template>\n        </ng-template>\n      </div>\n\n      <ng-container *ngSwitchCase=\"'loading'\">\n        <div *ngIf=\"loaderTemplate; else defaultLoader\"\n             class=\"g-loading\"\n             [innerHTML]=\"loaderTemplate\">\n        </div>\n        <ng-template #defaultLoader>\n          <div *ngIf=\"isThumbnail\" class=\"g-thumb-loading\"></div>\n        </ng-template>\n      </ng-container>\n    </ng-container>\n  `\n})\n\nexport class GalleryImageComponent implements OnInit, OnDestroy {\n\n  /** Stream that emits the state */\n  private readonly _state = new BehaviorSubject<'loading' | 'success' | 'failed'>('loading');\n  readonly state = this._state.asObservable();\n\n  /** Progress value */\n  progress = 0;\n\n  /** Is thumbnail */\n  @Input() isThumbnail: boolean;\n\n  /** Image source URL */\n  @Input() src: string;\n  /** Loaded image URL */\n  imageUrl: SafeStyle;\n\n  /** Custom loader template */\n  @Input() loadingIcon: string;\n  /** Custom loader safe template */\n  loaderTemplate: SafeHtml;\n\n  /** Custom error template */\n  @Input() loadingError: string;\n  /** Custom error safe template */\n  errorTemplate: SafeHtml;\n\n  /** Stream that emits when an error occurs */\n  @Output() error = new EventEmitter<Error>();\n  /** loading error */\n  loadError: Error;\n\n  @HostBinding('class.g-image-loaded') get imageLoadSuccess(): boolean {\n    return !!this.imageUrl;\n  }\n\n  @HostBinding('class.g-image-error') get imageLoadFailed(): boolean {\n    return !!this.loadError;\n  }\n\n  constructor(private _sanitizer: DomSanitizer) {\n  }\n\n  ngOnInit() {\n    if (this.loadingIcon) {\n      this.loaderTemplate = this._sanitizer.bypassSecurityTrustHtml(this.loadingIcon);\n    }\n    if (this.loadingError) {\n      this.errorTemplate = this._sanitizer.bypassSecurityTrustHtml(this.loadingError);\n    }\n  }\n\n  ngOnDestroy() {\n    this._state.complete();\n  }\n\n  onProgress({loaded, total}: { loaded: number, total: number }) {\n    this.progress = loaded * 100 / total;\n  }\n\n  onLoaded(blobUrl: string) {\n    this.imageUrl = this._sanitizer.bypassSecurityTrustStyle(`url(\"${blobUrl}\")`);\n    this._state.next('success');\n  }\n\n  onError(err: Error) {\n    this.loadError = err;\n    this._state.next('failed');\n    this.error.emit(err);\n  }\n\n}\n","import { Component, Input, OnInit, ViewChild, ElementRef, ChangeDetectionStrategy, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'gallery-video',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <video #video [controls]=\"controls\" [poster]=\"poster\" (error)=\"error.emit($event)\">\n      <source *ngFor=\"let src of videoSources\" [src]=\"src?.url\" [type]=\"src?.type\"/>\n    </video>\n  `\n})\nexport class GalleryVideoComponent implements OnInit {\n\n  videoSources: { url: string, type?: string }[];\n  controls: boolean;\n\n  @Input() src: string | { url: string, type?: string }[];\n  @Input() poster: string;\n  @Input('controls') controlsEnabled: boolean;\n\n  @Input('pause') set pauseVideo(shouldPause: boolean) {\n    if (this.video.nativeElement) {\n      const video: HTMLVideoElement = this.video.nativeElement;\n      if (shouldPause && !video.paused) {\n        video.pause();\n      }\n    }\n  }\n\n  @Input('play') set playVideo(shouldPlay: boolean) {\n    if (this.video.nativeElement) {\n      const video: HTMLVideoElement = this.video.nativeElement;\n      if (shouldPlay) {\n        video.play();\n      }\n    }\n  }\n\n  /** Stream that emits when an error occurs */\n  @Output() error = new EventEmitter<Error>();\n\n  @ViewChild('video', { static: true }) video: ElementRef;\n\n  ngOnInit() {\n    if (this.src instanceof Array) {\n      // If video has multiple sources\n      this.videoSources = [...this.src];\n    } else {\n      this.videoSources = [{ url: this.src }];\n    }\n    this.controls = typeof this.controlsEnabled === 'boolean' ? this.controlsEnabled : true;\n  }\n}\n","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { GalleryState } from '../models/gallery.model';\nimport { GalleryConfig } from '../models/config.model';\n\n@Component({\n  selector: 'gallery-nav',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <i *ngIf=\"config.loop || state.hasPrev\"\n       class=\"g-nav-prev\"\n       aria-label=\"Previous\"\n       (tapClick)=\"action.emit('prev')\"\n       [innerHtml]=\"navIcon\"></i>\n\n    <i *ngIf=\"config.loop || state.hasNext\"\n       class=\"g-nav-next\"\n       aria-label=\"Next\"\n       (tapClick)=\"action.emit('next')\"\n       [innerHtml]=\"navIcon\"></i>\n  `\n})\nexport class GalleryNavComponent implements OnInit {\n\n  navIcon: SafeHtml;\n  @Input() state: GalleryState;\n  @Input() config: GalleryConfig;\n  @Output() action = new EventEmitter<string>();\n\n  constructor(private _sanitizer: DomSanitizer) {\n  }\n\n  ngOnInit() {\n    this.navIcon = this._sanitizer.bypassSecurityTrustHtml(this.config.navIcon);\n  }\n}\n","import { Component, Input, Output, HostBinding, ChangeDetectionStrategy, EventEmitter } from '@angular/core';\nimport { GalleryError, GalleryState } from '../models/gallery.model';\nimport { GalleryConfig } from '../models/config.model';\n\n@Component({\n  selector: 'gallery-core',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <gallery-thumbs *ngIf=\"config.thumb\"\n                    [state]=\"state\"\n                    [config]=\"config\"\n                    (action)=\"action.emit($event)\"\n                    (thumbClick)=\"thumbClick.emit($event)\">\n    </gallery-thumbs>\n    <div class=\"g-box\">\n      <gallery-slider [state]=\"state\"\n                      [config]=\"config\"\n                      (action)=\"action.emit($event)\"\n                      (itemClick)=\"itemClick.emit($event)\"\n                      (error)=\"error.emit($event)\">\n\n        <gallery-nav *ngIf=\"config.nav && state.items.length > 1\"\n                     [state]=\"state\"\n                     [config]=\"config\"\n                     (action)=\"action.emit($event)\">\n        </gallery-nav>\n\n      </gallery-slider>\n\n      <gallery-dots *ngIf=\"config.dots\"\n                    [state]=\"state\"\n                    [config]=\"config\"\n                    (action)=\"action.emit($event)\">\n      </gallery-dots>\n\n      <gallery-counter *ngIf=\"config.counter\"\n                       [state]=\"state\">\n      </gallery-counter>\n    </div>\n  `\n})\nexport class GalleryCoreComponent {\n\n  @Input() state: GalleryState;\n  @Input() config: GalleryConfig;\n  @Output() action = new EventEmitter<string | number>();\n  @Output() itemClick = new EventEmitter<number>();\n  @Output() thumbClick = new EventEmitter<number>();\n  @Output() error = new EventEmitter<GalleryError>();\n\n  /** Set thumbnails position */\n  @HostBinding('attr.thumbPosition') get thumbPosition(): 'top' | 'left' | 'left-top' | 'right' | 'bottom' |  'bottom-left' {\n    return this.config.thumbPosition;\n  }\n\n  /** Set sliding direction */\n  @HostBinding('attr.slidingDirection') get slidingDirection(): 'horizontal' | 'vertical' {\n    return this.config.slidingDirection;\n  }\n\n  /** Disable thumbnails clicks */\n  @HostBinding('attr.disableThumb') get disableThumb(): boolean {\n    return this.config.disableThumb;\n  }\n\n  /** Set gallery image size */\n  @HostBinding('attr.imageSize') get imageSize(): 'cover' | 'contain' {\n    return this.config.imageSize;\n  }\n\n  /** Set gallery dots position */\n  @HostBinding('attr.dotsPosition') get dotsPosition(): 'top' | 'bottom' {\n    return this.config.dotsPosition;\n  }\n\n  /** Set gallery counter position */\n  @HostBinding('attr.counterPosition') get counterPosition(): 'top' | 'bottom' {\n    return this.config.counterPosition;\n  }\n\n}\n","import { Component, Input, Output, ChangeDetectionStrategy, EventEmitter } from '@angular/core';\nimport { GalleryState } from '../models/gallery.model';\nimport { GalleryConfig } from '../models/config.model';\n\n@Component({\n  selector: 'gallery-dots',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"g-dot\"\n         *ngFor=\"let item of state.items; let i = index\"\n         [class.g-dot-active]=\"i === state.currIndex\"\n         [style.width.px]=\"config?.dotsSize\"\n         [style.height.px]=\"config?.dotsSize\"\n         (tapClick)=\"action.emit(i)\">\n      <div class=\"g-dot-inner\"></div>\n    </div>\n  `\n})\nexport class GalleryDotsComponent {\n  @Input() state: GalleryState;\n  @Input() config: GalleryConfig;\n  @Output() action = new EventEmitter<number>();\n}\n","import {\n  Component,\n  Input,\n  Output,\n  OnDestroy,\n  OnInit,\n  OnChanges,\n  HostBinding,\n  NgZone,\n  ElementRef,\n  EventEmitter,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { GalleryConfig } from '../models/config.model';\nimport { GalleryState, GalleryError } from '../models/gallery.model';\nimport { ThumbnailsPosition, ThumbnailsMode } from '../models/constants';\nimport { SliderState, WorkerState } from '../models/slider.model';\n\ndeclare const Hammer: any;\n\n@Component({\n  selector: 'gallery-thumbs',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div *ngIf=\"sliderState$ | async; let sliderState\"\n         class=\"g-thumbs-container\">\n      <div class=\"g-slider\"\n           [class.g-no-transition]=\"sliderState.active\"\n           [ngStyle]=\"sliderState.style\">\n\n        <gallery-thumb *ngFor=\"let item of state.items;let i = index\"\n                       [type]=\"item.type\"\n                       [config]=\"config\"\n                       [data]=\"item.data\"\n                       [currIndex]=\"state.currIndex\"\n                       [index]=\"i\"\n                       [tapClickDisabled]=\"config.disableThumb\"\n                       (tapClick)=\"thumbClick.emit(i)\"\n                       (error)=\"error.emit({itemIndex: i, error: $event})\"></gallery-thumb>\n      </div>\n    </div>\n  `\n})\nexport class GalleryThumbsComponent implements OnInit, OnChanges, OnDestroy {\n\n  /** Sliding worker */\n  private readonly _slidingWorker$ = new BehaviorSubject<WorkerState>({value: 0, active: false});\n\n  /** HammerJS instance */\n  private _hammer: any;\n\n  /** Current slider position in free sliding mode */\n  private _freeModeCurrentOffset = 0;\n\n  /** Stream that emits sliding state */\n  sliderState$: Observable<SliderState>;\n\n  /** Gallery state */\n  @Input() state: GalleryState;\n\n  /** Gallery config */\n  @Input() config: GalleryConfig;\n\n  /** Stream that emits when the active item should change */\n  @Output() action = new EventEmitter<string | number>();\n\n  /** Stream that emits when thumb is clicked */\n  @Output() thumbClick = new EventEmitter<number>();\n\n  /** Stream that emits when an error occurs */\n  @Output() error = new EventEmitter<GalleryError>();\n\n  /** Host height */\n  @HostBinding('style.height') height: string;\n\n  /** Host width */\n  @HostBinding('style.width') width: string;\n\n  constructor(private _el: ElementRef, private _zone: NgZone) {\n\n    // Activate sliding worker\n    this.sliderState$ = this._slidingWorker$.pipe(map((state: WorkerState) => ({\n      style: this.getSliderStyles(state),\n      active: state.active\n    })));\n  }\n\n  ngOnChanges() {\n    // Refresh the slider\n    this.updateSlider({value: 0, active: false});\n    this._freeModeCurrentOffset = 0;\n  }\n\n  ngOnInit() {\n    if (this.config.gestures && !this.config.disableThumb && typeof Hammer !== 'undefined') {\n\n      let direction: number;\n\n      switch (this.config.thumbPosition) {\n        case ThumbnailsPosition.Right:\n        case ThumbnailsPosition.Left:\n        case ThumbnailsPosition.LeftTop:\n          direction = Hammer.DIRECTION_VERTICAL;\n          break;\n        case ThumbnailsPosition.Top:\n        case ThumbnailsPosition.Bottom:\n        case ThumbnailsPosition.BottomLeft:\n          direction = Hammer.DIRECTION_HORIZONTAL;\n          break;\n      }\n\n      // Activate gestures\n      this._hammer = new Hammer(this._el.nativeElement);\n      this._hammer.get('pan').set({direction});\n\n      this._zone.runOutsideAngular(() => {\n        // Move the slider\n        switch (this.config.thumbMode) {\n          case ThumbnailsMode.Strict:\n            this._hammer.on('pan', (e) => this.strictMode(e));\n            break;\n          case ThumbnailsMode.Free:\n            this._hammer.on('pan', (e) => this.freeMode(e));\n        }\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hammer) {\n      this._hammer.destroy();\n    }\n  }\n\n  /**\n   * Sliding strict mode\n   */\n  private strictMode(e) {\n    switch (this.config.thumbPosition) {\n      case ThumbnailsPosition.Right:\n      case ThumbnailsPosition.Left:\n      case ThumbnailsPosition.LeftTop:\n        this.updateSlider({value: e.deltaY, active: true});\n        if (e.isFinal) {\n          this.updateSlider({value: 0, active: false});\n          this.verticalPan(e);\n        }\n        break;\n      case ThumbnailsPosition.Top:\n      case ThumbnailsPosition.Bottom:\n      case ThumbnailsPosition.BottomLeft:\n        this.updateSlider({value: e.deltaX, active: true});\n        if (e.isFinal) {\n          this.updateSlider({value: 0, active: false});\n          this.horizontalPan(e);\n        }\n    }\n  }\n\n  /**\n   * Sliding free mode\n   */\n  private freeMode(e) {\n    switch (this.config.thumbPosition) {\n      case ThumbnailsPosition.Right:\n      case ThumbnailsPosition.Left:\n      case ThumbnailsPosition.LeftTop:\n        this.updateSlider({value: this._freeModeCurrentOffset + e.deltaY, active: true});\n        if (e.isFinal) {\n          if (this.minFreeScrollExceeded(e.deltaY, this.config.thumbWidth, this.config.thumbHeight)) {\n            this._freeModeCurrentOffset = -(this.state.items.length - 1 - this.state.currIndex) * this.config.thumbHeight;\n          } else if (this.maxFreeScrollExceeded(e.deltaY, this.config.thumbHeight, this.config.thumbWidth)) {\n            this._freeModeCurrentOffset = this.state.currIndex * this.config.thumbHeight;\n          } else {\n            this._freeModeCurrentOffset += e.deltaY;\n          }\n          this.updateSlider({value: this._freeModeCurrentOffset, active: false});\n        }\n        break;\n      case ThumbnailsPosition.Top:\n      case ThumbnailsPosition.Bottom:\n      case ThumbnailsPosition.BottomLeft:\n        this.updateSlider({value: this._freeModeCurrentOffset + e.deltaX, active: true});\n        if (e.isFinal) {\n          if (this.minFreeScrollExceeded(e.deltaX, this.config.thumbHeight, this.config.thumbWidth)) {\n            this._freeModeCurrentOffset = -(this.state.items.length - 1 - this.state.currIndex) * this.config.thumbWidth;\n          } else if (this.maxFreeScrollExceeded(e.deltaX, this.config.thumbWidth, this.config.thumbHeight)) {\n            this._freeModeCurrentOffset = this.state.currIndex * this.config.thumbWidth;\n          } else {\n            this._freeModeCurrentOffset += e.deltaX;\n          }\n          this.updateSlider({value: this._freeModeCurrentOffset, active: false});\n        }\n    }\n  }\n\n  /**\n   * Check if the minimum free scroll is exceeded (used in Bottom, Left directions)\n   */\n  private minFreeScrollExceeded(delta: number, width: number, height: number): boolean {\n    return -(this._freeModeCurrentOffset + delta - width / 2) > (this.state.items.length - this.state.currIndex) * height;\n  }\n\n  /**\n   * Check if the maximum free scroll is exceeded (used in Top, Right directions)\n   */\n  private maxFreeScrollExceeded(delta: number, width: number, height: number): boolean {\n    return this._freeModeCurrentOffset + delta > (this.state.currIndex * width) + (height / 2);\n  }\n\n  /**\n   * Convert sliding state to styles\n   */\n  private getSliderStyles(state: WorkerState): any {\n    let value: number;\n    switch (this.config.thumbPosition) {\n      case ThumbnailsPosition.Top:\n      case ThumbnailsPosition.Bottom:\n        this.width = '100%';\n        this.height = this.config.thumbHeight + 'px';\n        value = -(this.state.currIndex * this.config.thumbWidth) - (this.config.thumbWidth / 2 - state.value);\n        return {\n          transform: `translate3d(${value}px, 0, 0)`,\n          width: this.state.items.length * this.config.thumbWidth + 'px',\n          height: '100%'\n        };\n      case ThumbnailsPosition.BottomLeft:\n        this.width = '100%';\n        this.height = this.config.thumbHeight + 'px';\n        value = -(this.state.currIndex * this.config.thumbWidth) - state.value;\n        return {\n          transform: `translate3d(${value}px, 0, 0)`,\n          width: this.state.items.length * this.config.thumbWidth + 'px',\n          height: '100%'\n        };\n      case ThumbnailsPosition.Left:\n      case ThumbnailsPosition.Right:\n        this.width = this.config.thumbWidth + 'px';\n        this.height = '100%';\n        value = -(this.state.currIndex * this.config.thumbHeight) - (this.config.thumbHeight / 2 - state.value);\n        return {\n          transform: `translate3d(0, ${value}px, 0)`,\n          width: '100%',\n          height: this.state.items.length * this.config.thumbHeight + 'px'\n        };\n      case ThumbnailsPosition.LeftTop:\n        this.width = this.config.thumbWidth + 'px';\n        this.height = '100%';\n        value = -(this.state.currIndex * this.config.thumbHeight) - state.value;\n        return {\n          transform: `translate3d(0, ${value}px, 0)`,\n          width: '100%',\n          height: this.state.items.length * this.config.thumbHeight + 'px'\n        };\n    }\n  }\n\n  private verticalPan(e: any) {\n    if (!(e.direction & Hammer.DIRECTION_UP && e.offsetDirection & Hammer.DIRECTION_VERTICAL)) {\n      return;\n    }\n    if (e.velocityY > 0.3) {\n      this.prev();\n    } else if (e.velocityY < -0.3) {\n      this.next();\n    } else {\n      if (e.deltaY / 2 <= -this.config.thumbHeight * this.state.items.length / this.config.panSensitivity) {\n        this.next();\n      } else if (e.deltaY / 2 >= this.config.thumbHeight * this.state.items.length / this.config.panSensitivity) {\n        this.prev();\n      } else {\n        this.action.emit(this.state.currIndex);\n      }\n    }\n  }\n\n  private horizontalPan(e: any) {\n    if (!(e.direction & Hammer.DIRECTION_HORIZONTAL && e.offsetDirection & Hammer.DIRECTION_HORIZONTAL)) {\n      return;\n    }\n    if (e.velocityX > 0.3) {\n      this.prev();\n    } else if (e.velocityX < -0.3) {\n      this.next();\n    } else {\n      if (e.deltaX / 2 <= -this.config.thumbWidth * this.state.items.length / this.config.panSensitivity) {\n        this.next();\n      } else if (e.deltaX / 2 >= this.config.thumbWidth * this.state.items.length / this.config.panSensitivity) {\n        this.prev();\n      } else {\n        this.action.emit(this.state.currIndex);\n      }\n    }\n  }\n\n  private next() {\n    this.action.emit('next');\n  }\n\n  private prev() {\n    this.action.emit('prev');\n  }\n\n  private updateSlider(state: WorkerState) {\n    const newState: WorkerState = {...this._slidingWorker$.value, ...state};\n    this._slidingWorker$.next(newState);\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  OnDestroy,\n  OnInit,\n  OnChanges,\n  Inject,\n  NgZone,\n  ElementRef,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  PLATFORM_ID\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { BehaviorSubject, Observable, Subscription, fromEvent } from 'rxjs';\nimport { map, tap, debounceTime } from 'rxjs/operators';\nimport { GalleryState, GalleryError } from '../models/gallery.model';\nimport { GalleryConfig } from '../models/config.model';\nimport { SlidingDirection } from '../models/constants';\nimport { SliderState, WorkerState } from '../models/slider.model';\n\ndeclare const Hammer: any;\n\n@Component({\n  selector: 'gallery-slider',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div *ngIf=\"sliderState$ | async; let sliderState\"\n         class=\"g-items-container\"\n         [ngStyle]=\"zoom\">\n\n      <div class=\"g-slider\"\n           [class.g-no-transition]=\"sliderState.active\"\n           [ngStyle]=\"sliderState.style\">\n\n        <gallery-item *ngFor=\"let item of state.items; let i = index\"\n                      [type]=\"item.type\"\n                      [config]=\"config\"\n                      [data]=\"item.data\"\n                      [currIndex]=\"state.currIndex\"\n                      [index]=\"i\"\n                      (tapClick)=\"itemClick.emit(i)\"\n                      (error)=\"error.emit({itemIndex: i, error: $event})\">\n        </gallery-item>\n\n      </div>\n    </div>\n    <ng-content></ng-content>\n  `\n})\nexport class GallerySliderComponent implements OnInit, OnChanges, OnDestroy {\n\n  /** Sliding worker */\n  private readonly _slidingWorker$ = new BehaviorSubject<WorkerState>({value: 0, active: false});\n\n  /** HammerJS instance */\n  private _hammer: any;\n\n  /** Stream that emits when the view is re-sized */\n  private _resizeSub$: Subscription;\n\n  /** Stream that emits sliding state */\n  sliderState$: Observable<SliderState>;\n\n  /** Gallery state */\n  @Input() state: GalleryState;\n\n  /** Gallery config */\n  @Input() config: GalleryConfig;\n\n  /** Stream that emits when the active item should change */\n  @Output() action = new EventEmitter<string | number>();\n\n  /** Stream that emits when item is clicked */\n  @Output() itemClick = new EventEmitter<number>();\n\n  /** Stream that emits when an error occurs */\n  @Output() error = new EventEmitter<GalleryError>();\n\n  /** Item zoom */\n  get zoom() {\n    return {transform: `perspective(50px) translate3d(0, 0, ${-this.config.zoomOut}px)`};\n  }\n\n  constructor(private _el: ElementRef, private _zone: NgZone, @Inject(PLATFORM_ID) private platform: Object) {\n\n    // Activate sliding worker\n    this.sliderState$ = this._slidingWorker$.pipe(map((state: WorkerState) => ({\n      style: this.getSliderStyles(state),\n      active: state.active\n    })));\n  }\n\n  ngOnChanges() {\n    // Refresh the slider\n    this.updateSlider({value: 0, active: false});\n  }\n\n  ngOnInit() {\n    if (this.config.gestures && typeof Hammer !== 'undefined') {\n\n      const direction = this.config.slidingDirection === SlidingDirection.Horizontal\n        ? Hammer.DIRECTION_HORIZONTAL\n        : Hammer.DIRECTION_VERTICAL;\n\n      // Activate gestures\n      this._hammer = new Hammer(this._el.nativeElement);\n      this._hammer.get('pan').set({direction});\n\n      this._zone.runOutsideAngular(() => {\n        // Move the slider\n        this._hammer.on('pan', (e) => {\n\n          switch (this.config.slidingDirection) {\n            case SlidingDirection.Horizontal:\n              this.updateSlider({value: e.deltaX, active: true});\n              if (e.isFinal) {\n                this.updateSlider({value: 0, active: false});\n                this.horizontalPan(e);\n              }\n              break;\n            case SlidingDirection.Vertical:\n              this.updateSlider({value: e.deltaY, active: true});\n              if (e.isFinal) {\n                this.updateSlider({value: 0, active: false});\n                this.verticalPan(e);\n              }\n          }\n        });\n      });\n    }\n\n    // Rearrange slider on window resize\n    if (isPlatformBrowser(this.platform)) {\n      this._resizeSub$ = fromEvent(window, 'resize').pipe(\n        debounceTime(200),\n        tap(() => this.updateSlider(this._slidingWorker$.value))\n      ).subscribe();\n    }\n\n    setTimeout(() => this.updateSlider({value: 0, active: false}));\n  }\n\n  ngOnDestroy() {\n    if (this._hammer) {\n      this._hammer.destroy();\n    }\n    if (this._resizeSub$) {\n      this._resizeSub$.unsubscribe();\n    }\n    this._slidingWorker$.complete();\n  }\n\n  /**\n   * Convert sliding state to styles\n   */\n  private getSliderStyles(state: WorkerState): any {\n    switch (this.config.slidingDirection) {\n      case SlidingDirection.Horizontal:\n        return {\n          transform: `translate3d(${-(this.state.currIndex * this._el.nativeElement.offsetWidth) + state.value}px, 0, 0)`,\n          width: `calc(100% * ${this.state.items.length})`,\n          height: '100%'\n        };\n      case SlidingDirection.Vertical:\n        return {\n          transform: `translate3d(0, ${-(this.state.currIndex * this._el.nativeElement.offsetHeight) + state.value}px, 0)`,\n          width: '100%',\n          height: `calc(100% * ${this.state.items.length})`,\n        };\n    }\n  }\n\n  private verticalPan(e) {\n    if (!(e.direction & Hammer.DIRECTION_UP && e.offsetDirection & Hammer.DIRECTION_VERTICAL)) {\n      return;\n    }\n    if (e.velocityY > 0.3) {\n      this.prev();\n    } else if (e.velocityY < -0.3) {\n      this.next();\n    } else {\n      if (e.deltaY / 2 <= -this._el.nativeElement.offsetHeight * this.state.items.length / this.config.panSensitivity) {\n        this.next();\n      } else if (e.deltaY / 2 >= this._el.nativeElement.offsetHeight * this.state.items.length / this.config.panSensitivity) {\n        this.prev();\n      } else {\n        this.action.emit(this.state.currIndex);\n      }\n    }\n  }\n\n  private horizontalPan(e) {\n    if (!(e.direction & Hammer.DIRECTION_HORIZONTAL && e.offsetDirection & Hammer.DIRECTION_HORIZONTAL)) {\n      return;\n    }\n    if (e.velocityX > 0.3) {\n      this.prev();\n    } else if (e.velocityX < -0.3) {\n      this.next();\n    } else {\n      if (e.deltaX / 2 <= -this._el.nativeElement.offsetWidth * this.state.items.length / this.config.panSensitivity) {\n        this.next();\n      } else if (e.deltaX / 2 >= this._el.nativeElement.offsetWidth * this.state.items.length / this.config.panSensitivity) {\n        this.prev();\n      } else {\n        this.action.emit(this.state.currIndex);\n      }\n    }\n  }\n\n  private next() {\n    this.action.emit('next');\n  }\n\n  private prev() {\n    this.action.emit('prev');\n  }\n\n  private updateSlider(state: WorkerState) {\n    const newState: WorkerState = {...this._slidingWorker$.value, ...state};\n    this._slidingWorker$.next(newState);\n  }\n}\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { GalleryState } from '../models/gallery.model';\n\n@Component({\n  selector: 'gallery-counter',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"g-counter\">{{(state.currIndex + 1) + '/' + state.items.length}}</div>\n  `\n})\nexport class GalleryCounterComponent {\n  @Input() state: GalleryState;\n}\n","import { Component, Input, ChangeDetectionStrategy, HostBinding, Output, EventEmitter } from '@angular/core';\nimport { GalleryConfig } from '../models/config.model';\nimport { LoadingStrategy, GalleryItemType } from '../models/constants';\n\n@Component({\n  selector: 'gallery-item',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <ng-container *ngIf=\"load\" [ngSwitch]=\"type\">\n\n      <ng-container *ngSwitchCase=\"Types.Image\">\n\n        <gallery-image [src]=\"data.src\"\n                       [loadingIcon]=\"config.loadingIcon\"\n                       [loadingError]=\"config.loadingError\"\n                       (error)=\"error.emit($event)\"></gallery-image>\n\n        <div class=\"g-template g-item-template\">\n          <ng-container *ngTemplateOutlet=\"config.itemTemplate;\n          context: { index: this.index, currIndex: this.currIndex, type: this.type, data: this.data }\">\n          </ng-container>\n        </div>\n\n      </ng-container>\n\n      <gallery-video *ngSwitchCase=\"Types.Video\"\n                     [src]=\"data.src\"\n                     [poster]=\"data.poster\"\n                     [controls]=\"data.controls\"\n                     [play]=\"isAutoPlay\"\n                     [pause]=\"currIndex !== index\"\n                     (error)=\"error.emit($event)\"></gallery-video>\n\n      <gallery-iframe *ngSwitchCase=\"Types.Youtube\"\n                      [src]=\"youtubeSrc\"\n                      [autoplay]=\"isAutoPlay\"\n                      [pause]=\"currIndex !== index\"></gallery-iframe>\n\n      <gallery-iframe *ngSwitchCase=\"Types.Iframe\"\n                      [src]=\"data.src\"></gallery-iframe>\n\n      <ng-container *ngSwitchDefault>\n\n        <div class=\"g-template g-item-template\">\n          <ng-container *ngTemplateOutlet=\"config.itemTemplate;\n          context: { index: this.index, currIndex: this.currIndex, type: this.type, data: this.data }\">\n          </ng-container>\n        </div>\n\n      </ng-container>\n\n    </ng-container>\n  `\n})\nexport class GalleryItemComponent {\n\n  readonly Types = GalleryItemType;\n\n  /** Gallery config */\n  @Input() config: GalleryConfig;\n\n  /** Item's index in the gallery */\n  @Input() index: number;\n\n  /** Gallery current index */\n  @Input() currIndex: number;\n\n  /** Item's type 'image', 'video', 'youtube', 'iframe' */\n  @Input() type: string;\n\n  /** Item's data, this object contains the data required to display the content (e.g. src path) */\n  @Input() data: any;\n\n  /** Stream that emits when an error occurs */\n  @Output() error = new EventEmitter<Error>();\n\n  @HostBinding('class.g-active-item') get isActive() {\n    return this.index === this.currIndex;\n  }\n\n  get isAutoPlay() {\n    if (this.isActive) {\n      if (this.type === GalleryItemType.Video || this.type === GalleryItemType.Youtube) {\n        return this.data.autoplay;\n      }\n    }\n  }\n\n  get youtubeSrc() {\n    let autoplay: 1 | 0 = 0;\n    if (this.isActive && this.type === GalleryItemType.Youtube && this.data.autoplay) {\n      autoplay = 1;\n    }\n    const url = new URL(this.data.src);\n    url.search = new URLSearchParams({\n      wmode: 'transparent',\n      ...this.data.params,\n      autoplay\n    }).toString();\n    return url.href;\n  }\n\n  get load() {\n    switch (this.config.loadingStrategy) {\n      case LoadingStrategy.Preload:\n        return true;\n      case LoadingStrategy.Lazy:\n        return this.currIndex === this.index;\n      default:\n        return this.currIndex === this.index || this.currIndex === this.index - 1 || this.currIndex === this.index + 1;\n    }\n  }\n\n}\n","import { Component, Input, ChangeDetectionStrategy, HostBinding, Output, EventEmitter } from '@angular/core';\nimport { GalleryConfig } from '../models/config.model';\n\n@Component({\n  selector: 'gallery-thumb',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <gallery-image [src]=\"data.thumb\" \n                   mode=\"indeterminate\"\n                   [isThumbnail]=\"true\" \n                   [loadingIcon]=\"config.thumbLoadingIcon\"\n                   [loadingError]=\"config.thumbLoadingError \"\n                   (error)=\"error.emit($event)\"></gallery-image>\n\n    <div *ngIf=\"config.thumbTemplate\" class=\"g-template g-thumb-template\">\n      <ng-container\n        *ngTemplateOutlet=\"config.thumbTemplate; context: { index: this.index, type: this.type, data: this.data }\">\n      </ng-container>\n    </div>\n  `\n})\nexport class GalleryThumbComponent {\n\n  @Input() config: GalleryConfig;\n\n  /** Item's index in the gallery */\n  @Input() index: number;\n\n  /** Gallery current index */\n  @Input() currIndex: number;\n\n  /** Item's type 'image', 'video', 'youtube', 'iframe' */\n  @Input() type: string;\n\n  /** Item's data, this object contains the data required to display the content (e.g. src path) */\n  @Input() data: any;\n\n  @Output() error = new EventEmitter<Error>();\n\n  @HostBinding('class.g-active-thumb') get isActive() {\n    return this.index === this.currIndex;\n  }\n\n}\n","import { Directive, Input, Output, OnDestroy, SimpleChanges, OnChanges, EventEmitter, Inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Subject, Observable, Subscription, zip, fromEvent } from 'rxjs';\nimport { tap, switchMap } from 'rxjs/operators';\n\n@Directive({\n  selector: '[lazyImage]'\n})\nexport class LazyImage implements OnChanges, OnDestroy {\n\n  private _imageLoader$ = new Subject<string>();\n  private _loaderSub$ = Subscription.EMPTY;\n\n  @Input('lazyImage') src: string;\n\n  @Output() loaded = new EventEmitter<string>();\n  @Output() error = new EventEmitter<Error>();\n\n  constructor(@Inject(DOCUMENT) private document: any) {\n    this._loaderSub$ = this._imageLoader$.pipe(\n      switchMap((imageSrc: string) => this.nativeLoader(imageSrc))\n    ).subscribe();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['src'] && changes['src'].previousValue !== changes['src'].currentValue) {\n      this.loadImage(this.src);\n    }\n  }\n\n  ngOnDestroy() {\n    this._loaderSub$.unsubscribe();\n    this._imageLoader$.complete();\n  }\n\n  loadImage(imagePath: string) {\n    this._imageLoader$.next(imagePath);\n  }\n\n  /**\n   * Native image loader, does not emit progress\n   * @param url\n   */\n  nativeLoader(url: string): Observable<any> {\n    const img = this.document.createElement('img');\n    // Stop previously loading\n    img.src = url;\n    // Image load success\n    const loadSuccess = fromEvent(img, 'load').pipe(\n      tap(() => this.loaded.emit(url))\n    );\n    // Image load failed\n    const loadError = fromEvent(img, 'error').pipe(\n      tap(() => this.error.emit(new Error(`[lazyImage]: The image ${url} did not load`)))\n    );\n    return zip(loadSuccess, loadError);\n  }\n\n}\n","import { Directive, Input, OnDestroy, OnInit, Output, ElementRef, EventEmitter } from '@angular/core';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { filter, tap } from 'rxjs/operators';\n\ndeclare const Hammer: any;\n\n/**\n * This directive uses tap event if HammerJS is loaded, otherwise it falls back to normal click event\n */\n@Directive({\n  selector: '[tapClick]'\n})\nexport class TapClick implements OnInit, OnDestroy {\n\n  private _hammer: any;\n  clickListener = Subscription.EMPTY;\n  @Input() tapClickDisabled: boolean;\n  @Output() tapClick = new EventEmitter();\n\n  constructor(private _el: ElementRef) {\n  }\n\n  ngOnInit() {\n    this.activateClickEvent();\n  }\n\n  activateClickEvent() {\n    if (typeof Hammer !== 'undefined') {\n      // Use Hammer.js tap event\n      this._hammer = new Hammer(this._el.nativeElement);\n      this._hammer.on('tap', () => {\n        if (!this.tapClickDisabled) {\n          this.tapClick.emit(null);\n        }\n      });\n    } else {\n      // Use normal click event\n      this.clickListener = fromEvent(this._el.nativeElement, 'click').pipe(\n        filter(() => !this.tapClickDisabled),\n        tap(() => this.tapClick.emit(null))\n      ).subscribe();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hammer) {\n      this._hammer.destroy();\n    }\n    this.clickListener.unsubscribe();\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { GalleryConfig, GALLERY_CONFIG } from './models/config.model';\n\nimport { GalleryComponent } from './components/gallery.component';\nimport { GalleryNavComponent } from './components/gallery-nav.component';\nimport { GalleryCoreComponent } from './components/gallery-core.component';\nimport { GalleryDotsComponent } from './components/gallery-dots.component';\nimport { GalleryThumbsComponent } from './components/gallery-thumbs.component';\nimport { GallerySliderComponent } from './components/gallery-slider.component';\nimport { GalleryCounterComponent } from './components/gallery-counter.component';\n\nimport { GalleryItemComponent } from './components/gallery-item.component';\nimport { GalleryThumbComponent } from './components/gallery-thumb.component';\nimport { GalleryImageComponent } from './components/templates/gallery-image.component';\nimport { GalleryVideoComponent } from './components/templates/gallery-video.component';\nimport { GalleryIframeComponent } from './components/templates/gallery-iframe.component';\n\nimport { LazyImage } from './directives/lazy-image';\nimport { TapClick } from './directives/tap-click';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    GalleryComponent,\n    GalleryNavComponent,\n    GalleryDotsComponent,\n    GalleryCoreComponent,\n    GallerySliderComponent,\n    GalleryCounterComponent,\n    GalleryThumbsComponent,\n    GalleryThumbComponent,\n    GalleryItemComponent,\n    GalleryImageComponent,\n    GalleryVideoComponent,\n    GalleryIframeComponent,\n    LazyImage,\n    TapClick\n  ],\n  exports: [\n    GalleryComponent,\n    LazyImage,\n    TapClick\n  ]\n})\nexport class GalleryModule {\n  static withConfig(config: GalleryConfig): ModuleWithProviders<GalleryModule> {\n\n    return {\n      ngModule: GalleryModule,\n      providers: [\n        {\n          provide: GALLERY_CONFIG,\n          useValue: config\n        }\n      ]\n    };\n  }\n}\n"]}